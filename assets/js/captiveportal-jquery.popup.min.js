/*-------------------------------

	POPUP.JS

	Simple Popup plugin for jQuery

	@author Todd Francis
	@version 2.2.3

-------------------------------*/

!function(e,t){e.fn.popup=function(t){var n=this.selector,o=new e.Popup(t);return e(document).on("click.popup",n,function(n){var i=t&&t.content?t.content:e(this).attr("href");n.preventDefault(),o.open(i,void 0,this)}),this.each(function(){e(this).data("popup",o)})},e.Popup=function(n){function o(n){r&&r.fadeOut("fast",function(){e(this).remove()});var o=!0;void 0===s&&(o=!1,s=e('<div class="'+h.o.containerClass+'">'),p=e(h.o.markup).appendTo(s),e(h.o.closeContent).one("click",function(){h.close()}).appendTo(s),e(t).resize(h.center),s.appendTo(e("body")).css("opacity",0));var i=e("."+h.o.contentClass,s);h.width?i.css("width",h.width,10):i.css("width",""),h.height?i.css("height",h.height,10):i.css("height",""),p.hasClass(h.o.contentClass)?p.html(n):p.find("."+h.o.contentClass).html(n),o?h.o.replaced.call(h,s,c):h.o.show.call(h,s,c)}function i(e,t){var n=new RegExp("[?&]"+e+"=([^&]*)").exec(t);return n&&decodeURIComponent(n[1].replace(/\+/g," "))}var a,l,c,s,r,p,h=this,u=["png","jpg","gif"];h.ele=void 0,h.o=e.extend(!0,{},{backClass:"popup_back",backOpacity:.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:!1,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:!0,modal:!1,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(e){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function(e,t){var n=this;n.center(),e.animate({opacity:1},n.o.speed,function(){n.o.afterOpen.call(n)})},replaced:function(e,t){this.center().o.afterOpen.call(this)},hide:function(e,t){void 0!==e&&e.animate({opacity:0},this.o.speed)},types:{inline:function(t,n){var o=e(t);o.addClass(h.o.popupPlaceholderClass),h.o.keepInlineChanges||(l=o.html()),n.call(this,o.children())},image:function(t,n){var o=this;e("<img />").one("load",function(){var e=this;setTimeout(function(){n.call(o,e)},0)}).one("error",function(){h.o.error.call(h,t,"image")}).attr("src",t).each(function(){this.complete&&e(this).trigger("load")})},external:function(t,n){var o=e("<iframe />").attr({src:t,frameborder:0,width:h.width,height:h.height});n.call(this,o)},html:function(e,t){t.call(this,e)},jQuery:function(e,t){t.call(this,e.html())},function:function(e,t){t.call(this,e.call(h))},ajax:function(t,n){e.ajax({url:t,success:function(e){n.call(this,e)},error:function(e){h.o.error.call(h,t,"ajax")}})}}},n),h.open=function(t,n,l){if(null===(t=void 0===t||"#"===t?h.o.content:t))return h.o.error.call(h,t,a),!1;var s,p,d;if(void 0!==l&&(h.ele&&h.o.activeClass&&e(h.ele).removeClass(h.o.activeClass),h.ele=l,h.ele&&h.o.activeClass&&e(h.ele).addClass(h.o.activeClass)),void 0===c&&(c=e('<div class="'+h.o.backClass+'"/>').appendTo(e("body")).css("opacity",0).animate({opacity:h.o.backOpacity},h.o.speed),h.o.modal||c.one("click.popup",function(){h.close()}),h.o.hideFlash&&e("object, embed").css("visibility","hidden"),h.o.preloaderContent&&(r=e(h.o.preloaderContent).appendTo(e("body")))),s=[n,h.o.type],e.each(s,function(e,t){if(t)return p=t,!1}),a=n="auto"===(n=p)?"function"==typeof(d=t)?"function":d instanceof e?"jQuery":"#"===d.substr(0,1)||"."===d.substr(0,1)?"inline":-1!==e.inArray(d.substr(d.length-3),u)?"image":"http"===d.substr(0,4)?"external":"ajax":n,h.width=h.o.width?h.o.width:null,h.height=h.o.height?h.o.height:null,-1===e.inArray(n,["inline","jQuery","function"])){l=i(h.o.typeParam,t);var f=i(h.o.widthParam,t),m=i(h.o.heightParam,t);n=null!==l?l:n,h.width=null!==f?f:h.width,h.height=null!==m?m:h.height}h.o.beforeOpen.call(h,n),h.o.types[n]?h.o.types[n].call(h,t,o):h.o.types.ajax.call(h,t,o)},h.close=function(){return h.o.beforeClose.call(h),"inline"===a&&h.o.keepInlineChanges&&(l=e("."+h.o.contentClass).html()),void 0!==c&&c.animate({opacity:0},h.o.speed,function(){h.cleanUp()}),h.o.hide.call(h,s,c),h},h.cleanUp=function(){c.add(s).remove(),s=c=void 0,e(t).unbind("resize",h.center),h.o.hideFlash&&e("object, embed").css("visibility","visible"),h.ele&&h.o.activeClass&&e(h.ele).removeClass(h.o.activeClass);var n=e("."+h.o.popupPlaceholderClass);return"inline"==a&&n.length&&n.html(l).removeClass(h.o.popupPlaceholderClass),a=null,h.o.afterClose.call(h),h},h.center=function(){return s.css(h.getCenter()),c.css({height:document.documentElement.clientHeight}),h},h.getCenter=function(){var e=s.children().outerWidth(!0),t=s.children().outerHeight(!0);return{top:Math.max(10,.5*document.documentElement.clientHeight-.5*t),left:.5*document.documentElement.clientWidth-.5*e}}}}(jQuery,window);